name: Release

on:
  workflow_dispatch:
    inputs:
      artifact_version:
        description: 'Target version for artifacts to build and publish'
        required: true

jobs:
  gradle:
    runs-on: ubuntu-latest
    permissions:
      checks: write
      contents: read
      packages: write
      pages: write
    steps:
    - name: Checkout sources
      uses: actions/checkout@v4.2.2
    - name: Run Gradle Test
      uses: ./actions/gradle-test
      with:
        artifacts_version: "${{ inputs.artifact_version }}"
        gradle_args: "-PreleaseBuild=true"
